!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["video/player/mini-player-size"]=n():e["video/player/mini-player-size"]=n()}(globalThis,(()=>(()=>{var e,n,i={32:(e,n,i)=>{var t=i(955)((function(e){return e[1]}));t.push([e.id,':root {\n  --mini-player-width: 320px;\n  --mini-player-height: 180px;\n  --mini-player-scale: 1;\n  --mini-player-icon-size: 100px;\n  --mini-player-handle-size: 24px;\n  --mini-player-handle-icon-size: 10px;\n  --mini-player-handle-offset: 2px;\n}\n\n.bpx-player-container[data-screen=mini],\n.bpx-player-container[data-screen=mini] .bpx-player-primary-area,\n.bpx-player-container[data-screen=mini] .bpx-player-video-area,\n.bpx-player-container[data-screen=mini] .bpx-player-video-perch,\n.bpx-player-container[data-screen=mini] .bpx-player-video-wrap {\n  width: var(--mini-player-width) !important;\n  height: var(--mini-player-height) !important;\n}\n.bpx-player-container[data-screen=mini] .bpx-player-video-wrap video {\n  width: 100% !important;\n  height: 100% !important;\n  object-fit: contain;\n}\n\n.bpx-player-mini-warp {\n  width: var(--mini-player-width) !important;\n  height: var(--mini-player-height) !important;\n}\n.bpx-player-mini-warp .bpx-player-mini-state {\n  position: absolute !important;\n  top: 50% !important;\n  left: 50% !important;\n  width: var(--mini-player-icon-size) !important;\n  height: var(--mini-player-icon-size) !important;\n  margin-left: calc(var(--mini-player-icon-size) / -2) !important;\n  margin-top: calc(var(--mini-player-icon-size) / -2) !important;\n}\n.bpx-player-mini-warp .bpx-player-mini-state-play,\n.bpx-player-mini-warp .bpx-player-mini-state-pause {\n  width: var(--mini-player-icon-size) !important;\n  height: var(--mini-player-icon-size) !important;\n  background-size: contain !important;\n  background-repeat: no-repeat !important;\n  background-position: center !important;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-handle {\n  position: absolute;\n  width: var(--mini-player-handle-size);\n  height: var(--mini-player-handle-size);\n  z-index: 100000;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  background: transparent;\n  pointer-events: all !important;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-handle::before {\n  content: "";\n  position: absolute;\n  width: var(--mini-player-handle-icon-size);\n  height: var(--mini-player-handle-icon-size);\n  border: 2px solid rgba(255, 255, 255, 0.7);\n  border-radius: 2px;\n}\n.bpx-player-mini-warp:hover > .be-mini-player-resize-handle, .bpx-player-mini-warp.be-resizing > .be-mini-player-resize-handle {\n  opacity: 1;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-nw {\n  top: 0;\n  left: 0;\n  cursor: nw-resize;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-nw::before {\n  top: var(--mini-player-handle-offset);\n  left: var(--mini-player-handle-offset);\n  border-right: none;\n  border-bottom: none;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-ne {\n  top: 0;\n  right: 0;\n  cursor: ne-resize;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-ne::before {\n  top: var(--mini-player-handle-offset);\n  right: var(--mini-player-handle-offset);\n  border-left: none;\n  border-bottom: none;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-sw {\n  bottom: 0;\n  left: 0;\n  cursor: sw-resize;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-sw::before {\n  bottom: var(--mini-player-handle-offset);\n  left: var(--mini-player-handle-offset);\n  border-right: none;\n  border-top: none;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-se {\n  bottom: 0;\n  right: 0;\n  cursor: se-resize;\n}\n.bpx-player-mini-warp > .be-mini-player-resize-se::before {\n  bottom: var(--mini-player-handle-offset);\n  right: var(--mini-player-handle-offset);\n  border-left: none;\n  border-top: none;\n}',""]),e.exports=t},955:e=>{"use strict";
// eslint-disable-next-line func-names
e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var i=e(n);return n[2]?"@media ".concat(n[2]," {").concat(i,"}"):i})).join("")},
// eslint-disable-next-line func-names
n.i=function(e,i,t){"string"==typeof e&&(
// eslint-disable-next-line no-param-reassign
e=[[null,e,""]]);var r={};if(t)for(var a=0;a<this.length;a++){
// eslint-disable-next-line prefer-destructuring
var o=this[a][0];null!=o&&(r[o]=!0)}for(var p=0;p<e.length;p++){var l=[].concat(e[p]);t&&r[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),n.push(l))}},n}},526:(e,n,i)=>{var t=i(32);t&&t.__esModule&&(t=t.default),e.exports="string"==typeof t?t:t.toString()}},t={};function r(e){var n=t[e];if(void 0!==n)return n.exports;var a=t[e]={id:e,exports:{}};return i[e](a,a.exports,r),a.exports}n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(i,t){if(1&t&&(i=this(i)),8&t)return i;if("object"==typeof i&&i){if(4&t&&i.__esModule)return i;if(16&t&&"function"==typeof i.then)return i}var a=Object.create(null);r.r(a);var o={};e=e||[null,n({}),n([]),n(n)];for(var p=2&t&&i;"object"==typeof p&&!~e.indexOf(p);p=n(p))Object.getOwnPropertyNames(p).forEach((e=>o[e]=()=>i[e]));return o.default=()=>i,r.d(a,o),a},r.d=(e,n)=>{for(var i in n)r.o(n,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";r.d(a,{component:()=>l});const e=coreApis.componentApis.define,n=coreApis.settings,i=coreApis.utils.urls,t=16/9,o=(0,e.defineOptionsMetadata)({width:{displayName:"宽度 (px)",defaultValue:320},height:{displayName:"高度 (px)",defaultValue:180},keepAspectRatio:{displayName:"保持 16:9 宽高比",defaultValue:!0}}),p=(e,n)=>{const i=e/640,t=document.documentElement.style;t.setProperty("--mini-player-width",`${e}px`),t.setProperty("--mini-player-height",`${n}px`),t.setProperty("--mini-player-scale",`${i}`),t.setProperty("--mini-player-icon-size",`${Math.round(100*i)}px`)},l=(0,e.defineComponentMetadata)({name:"miniPlayerSize",displayName:"小窗播放器大小",author:{name:"GH4NG",link:"https://github.com/GH4NG"},description:{"zh-CN":"自定义视频小窗播放器的大小, 可通过拖拽四角调整, 支持保持 16:9 宽高比."},tags:[componentsTags.video],urlInclude:i.videoAndBangumiUrls,instantStyles:[{name:"miniPlayerSize",style:()=>Promise.resolve().then(r.t.bind(r,526,23))}],options:o,entry:async e=>{let{metadata:i}=e;const r=(0,n.getComponentSettings)(i.name),{width:a,height:o}=r.options;p(a,o);window.addEventListener("playerModeChange",(()=>{const e=dq(".bpx-player-mini-warp");e&&!e.querySelector(".be-mini-player-resize-handle")&&((e,n)=>{e.querySelector(".be-mini-player-resize-handle")||["nw","ne","sw","se"].forEach((i=>{const r=document.createElement("div");r.className=`be-mini-player-resize-handle be-mini-player-resize-${i}`,r.dataset.direction=i,e.appendChild(r);let a=0,o=0,l=0,s=0;const m=e=>{const r=e.clientX-a,m=e.clientY-o;let d=l,c=s;i.includes("e")?d=l+r:i.includes("w")&&(d=l-r),i.includes("s")?c=s+m:i.includes("n")&&(c=s-m),d=lodash.clamp(d,160,window.innerWidth),c=lodash.clamp(c,90,window.innerHeight),n.options.keepAspectRatio&&(c=Math.round(d/t),c=lodash.clamp(c,90,window.innerHeight)),p(d,c)},d=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",d),e.classList.remove("be-resizing");const i=lodash.clamp(e.offsetWidth,160,window.innerWidth);let r=lodash.clamp(e.offsetHeight,90,window.innerHeight);n.options.keepAspectRatio&&(r=Math.round(i/t)),n.options.width=i,n.options.height=r,p(i,r)};r.addEventListener("mousedown",(n=>{n.preventDefault(),a=n.clientX,o=n.clientY,l=e.offsetWidth,s=e.offsetHeight,document.addEventListener("mousemove",m),document.addEventListener("mouseup",d),e.classList.add("be-resizing"),n.stopPropagation()}))}))})(e,r)}))},commitHash:"89fb2c637b9efb1cf418b68a45a4f2255a7601f9",coreVersion:"2.10.6"})})(),a=a.component})()));