!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["video/player/video-scaling"]=t():e["video/player/video-scaling"]=t()}(globalThis,(()=>(()=>{var e,t,n={660:(e,t,n)=>{var o=n(955)((function(e){return e[1]}));o.push([e.id,'@charset "UTF-8";\n/* è§†é¢‘ç¼©æ”¾ç»„ä»¶æ ·å¼è¡¥å…… */\n/* ç¡®ä¿ç¼©æ”¾åŠŸèƒ½åœ¨ä¸åŒæ’­æ”¾å™¨ç‰ˆæœ¬ä¸­éƒ½èƒ½æ­£å¸¸å·¥ä½œ */\n.bilibili-player-video {\n  position: relative;\n  overflow: hidden;\n}\n\n.bpx-player-video-container {\n  position: relative;\n  overflow: hidden;\n}\n\n/* è‡ªå®šä¹‰ç¼©æ”¾æ—¶çš„å¹³æ»‘è¿‡æ¸¡æ•ˆæžœ */\n.bilibili-player-video video,\nvideo[class^=bpx-player-video-element],\n.bilibili-player-video .bpx-player-video-element {\n  transition: transform 0.3s ease;\n}',""]),e.exports=o},955:e=>{"use strict";
// eslint-disable-next-line func-names
e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},
// eslint-disable-next-line func-names
t.i=function(e,n,o){"string"==typeof e&&(
// eslint-disable-next-line no-param-reassign
e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){
// eslint-disable-next-line prefer-destructuring
var a=this[i][0];null!=a&&(r[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);o&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},606:(e,t,n)=>{var o=n(660);o&&o.__esModule&&(o=o.default),e.exports="string"==typeof o?o:o.toString()},825:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=825,e.exports=t},290:e=>{"use strict";e.exports='> å…è®¸è°ƒæ•´è§†é¢‘çš„æ˜¾ç¤ºç¼©æ”¾æ¯”ä¾‹ï¼Œè®©æ‚¨æ ¹æ®å±å¹•å¤§å°å’Œä¸ªäººåå¥½è‡ªå®šä¹‰è§†é¢‘æ’­æ”¾ä½“éªŒã€‚\n\n#### ðŸ”§ **é€‰é¡¹**\n\n- \\`ç¼©æ”¾æ¯”ä¾‹\\`ï¼šé€‰æ‹©é¢„è®¾çš„è§†é¢‘ç¼©æ”¾æ¯”ä¾‹ï¼ŒåŒ…æ‹¬ 75%ã€100%ï¼ˆé»˜è®¤ï¼‰ã€110%ã€125%ã€150% ä»¥åŠè‡ªå®šä¹‰é€‰é¡¹ã€‚\n\n- \\`è‡ªå®šä¹‰ç¼©æ”¾æ¯” (%)\\`ï¼šå½“é€‰æ‹© "è‡ªå®šä¹‰" é€‰é¡¹æ—¶æ˜¾ç¤ºï¼Œå¯åœ¨ 50%-300% èŒƒå›´å†…ä»¥ 10% ä¸ºæ­¥é•¿è‡ªç”±è°ƒæ•´ç¼©æ”¾æ¯”ä¾‹ã€‚\n\n- \\`æ˜¾ç¤ºç¼©æ”¾æç¤º\\`ï¼šå¯ç”¨åŽï¼Œåœ¨è°ƒæ•´ç¼©æ”¾æ¯”ä¾‹æ—¶ä¼šæ˜¾ç¤ºçŸ­æš‚æç¤ºï¼Œå‘ŠçŸ¥å½“å‰ç¼©æ”¾æ¯”ä¾‹ã€‚\n\n- \\`æç¤ºæ˜¾ç¤ºæ—¶é—´ (ç§’)\\`ï¼šæŽ§åˆ¶ç¼©æ”¾æç¤ºçš„æ˜¾ç¤ºæ—¶é•¿ï¼Œå¯åœ¨ 0.5-5 ç§’èŒƒå›´å†…ä»¥ 0.5 ç§’ä¸ºæ­¥é•¿è°ƒæ•´ã€‚\n\n- \\`æ˜¾ç¤ºæŽ§åˆ¶æ æŒ‰é’®\\`ï¼šåœ¨æ’­æ”¾å™¨æŽ§åˆ¶æ æ·»åŠ ä¸€ä¸ªç¼©æ”¾æŒ‰é’®ï¼Œç‚¹å‡»å¯å¾ªçŽ¯åˆ‡æ¢é¢„è®¾çš„ç¼©æ”¾æ¯”ä¾‹ã€‚\n\n#### **ä½¿ç”¨æ–¹æ³•**\n\n1. **é€šè¿‡è®¾ç½®é¢æ¿**ï¼šåœ¨ç»„ä»¶è®¾ç½®ä¸­ç›´æŽ¥é€‰æ‹©é¢„è®¾çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œæˆ–é€‰æ‹© "è‡ªå®šä¹‰" åŽè°ƒæ•´æ»‘åŠ¨æ¡è®¾ç½®ç‰¹å®šæ¯”ä¾‹ã€‚\n\n2. **é€šè¿‡æŽ§åˆ¶æ æŒ‰é’®**ï¼šå¦‚æžœå¯ç”¨äº†æŽ§åˆ¶æ æŒ‰é’®ï¼Œç‚¹å‡»æ’­æ”¾å™¨æŽ§åˆ¶æ ä¸Šçš„ç¼©æ”¾å›¾æ ‡ï¼ˆæ”¾å¤§é•œå›¾æ ‡ï¼‰å¯å¾ªçŽ¯åˆ‡æ¢é¢„è®¾ç¼©æ”¾æ¯”ä¾‹ã€‚\n\n#### **æ³¨æ„äº‹é¡¹**\n\n- è§†é¢‘åˆ‡æ¢æ—¶ï¼Œç¼©æ”¾æ¯”ä¾‹ä¼šè‡ªåŠ¨é‡ç½®ä¸ºå½“å‰è®¾ç½®çš„å€¼ã€‚\n- è¿‡é«˜çš„ç¼©æ”¾æ¯”ä¾‹å¯èƒ½å¯¼è‡´è§†é¢‘å†…å®¹è¶…å‡ºå±å¹•èŒƒå›´ï¼Œå»ºè®®æ ¹æ®å®žé™…å±å¹•å°ºå¯¸é€‚å½“è°ƒæ•´ã€‚\n'}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={id:e,exports:{}};return n[e](i,i.exports,r),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"==typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>n[e]));return a.default=()=>n,r.d(i,a),i},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";r.d(i,{component:()=>T});const e=coreApis.settings,t=coreApis.observer,n=coreApis.componentApis.define,o=coreApis.componentApis.video.videoControlBar,a=coreApis.componentApis.video.playerAgent,s=["75%","100%","110%","125%","150%","è‡ªå®šä¹‰"],c={"75%":.75,"100%":1,"110%":1.1,"125%":1.25,"150%":1.5,è‡ªå®šä¹‰:1},l=50,d=300,p=10,u=1.5,f=.5,m=5,y=.5,v="be-video-scale-toast";function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b{constructor(){h(this,"currentScale",1)}get(){return this.currentScale}set(e){this.currentScale=e}}async function g(e){try{const t=await a.playerAgent.query.video.element();t&&(t.style.transform=`scale(${e})`,t.style.transformOrigin="center")}catch(e){console.error("è§†é¢‘ç¼©æ”¾: æ— æ³•èŽ·å–è§†é¢‘å…ƒç´ ",e)}}function w(e,t,n){if("è‡ªå®šä¹‰"===e){const e=Math.max(l,Math.min(d,t));n.set(e/100)}else n.set(c[e]);return n.get()}function x(e,t){console.error(`${e}å¤±è´¥`,t)}var S=r(290);const P={defaultValue:100,displayName:"è‡ªå®šä¹‰ç¼©æ”¾æ¯” (%)",slider:{min:l,max:d,step:p},formatValue:e=>e,hidden:!0},O={defaultValue:u,displayName:"æç¤ºæ˜¾ç¤ºæ—¶é—´ (ç§’)",slider:{min:f,max:m,step:y},hidden:!1};let j=!1,C=null;const T=(0,n.defineComponentMetadata)({author:{name:"weedy233",link:"https://github.com/weedy233"},name:"videoScaling",displayName:"è§†é¢‘ç¼©æ”¾",description:S,tags:[componentsTags.video],instantStyles:[{name:"videoScaling",style:()=>Promise.resolve().then(r.t.bind(r,606,23))}],options:{scalePreset:{defaultValue:"100%",displayName:"ç¼©æ”¾æ¯”ä¾‹",dropdownEnum:[...s]},customScale:P,showToast:{defaultValue:!0,displayName:"æ˜¾ç¤ºç¼©æ”¾æç¤º"},toastDuration:O,showControlBarButton:{defaultValue:!0,displayName:"æ˜¾ç¤ºæŽ§åˆ¶æ æŒ‰é’®"}},entry:async n=>{let{settings:r}=n;const i=new b,a=Date.now();let l=a;O.hidden=!r.options.showToast;const d=async e=>{try{await g(e);const t=Date.now(),n=t-a>=3e3,o=t-l>=3e3;r.options.showToast&&100!==e&&n&&o&&function(e,t){try{let n=document.querySelector(`.${v}`);n||(n=document.createElement("div"),n.className=v);const o=dq("video")||dq("bwp-video");if(o){n.parentNode!==document.body&&document.body.appendChild(n);const t=o.getBoundingClientRect();n.style.cssText=`\n        position: fixed;\n        top: ${t.top+t.height/2}px;\n        left: ${t.left+t.width/2}px;\n        transform: translate(-50%, -50%);\n        background-color: rgba(0, 0, 0, 0.7);\n        color: white;\n        padding: 8px 16px;\n        border-radius: 4px;\n        z-index: 9999;\n        font-size: 16px;\n        pointer-events: none;\n      `,n.textContent=`ç¼©æ”¾: ${Math.round(100*e)}%`,n.timeoutId&&clearTimeout(n.timeoutId)}const r=1e3*t;n.timeoutId=setTimeout((()=>{n.remove()}),r)}catch(e){x("æ˜¾ç¤ºç¼©æ”¾æç¤º",e)}}(e,r.options.toastDuration)}catch(e){x("åº”ç”¨ç¼©æ”¾å’Œæ˜¾ç¤ºæç¤º",e)}},p=async()=>{try{const e=r.options.scalePreset;P.hidden="è‡ªå®šä¹‰"!==e;const t=w(e,r.options.customScale,i);await d(t)}catch(e){x("æ ¹æ®è®¾ç½®æ›´æ–°ç¼©æ”¾",e)}};(0,e.addComponentListener)("videoScaling.scalePreset",p),(0,e.addComponentListener)("videoScaling.customScale",(async e=>{try{const t=r.options.scalePreset;if("è‡ªå®šä¹‰"===t){const n=w(t,e,i);await d(n)}}catch(e){x("å¤„ç†è‡ªå®šä¹‰ç¼©æ”¾å˜åŒ–",e)}})),(0,e.addComponentListener)("videoScaling.showToast",(e=>{O.hidden=!e}));try{await p()}catch(e){x("åˆå§‹åŒ–è§†é¢‘ç¼©æ”¾",e)}try{(0,t.videoChange)((async()=>{try{l=Date.now(),await p()}catch(e){x("é‡ç½®è§†é¢‘ç¼©æ”¾",e)}}))}catch(e){x("å¯¼å…¥observer",e)}C=async e=>{try{e&&!j?(await(0,o.addControlBarButton)({name:"videoScaling",displayName:"è§†é¢‘ç¼©æ”¾",icon:"mdi-magnify",order:100,action:async()=>{try{const e=i.get(),t=s.filter((e=>"è‡ªå®šä¹‰"!==e));let n=-1;for(let o=0;o<t.length;o++)if(c[t[o]]===e){n=o;break}-1===n&&(n=t.indexOf("100%"));const o=t[(n+1)%t.length],a=c[o];r.options.scalePreset=o,await d(a)}catch(e){console.error("è§†é¢‘ç¼©æ”¾: å¾ªçŽ¯åˆ‡æ¢ç¼©æ”¾å€æ•°æ—¶å‡ºé”™",e)}}}),j=!0):!e&&j&&(j=!1)}catch(e){x("åˆ‡æ¢è§†é¢‘ç¼©æ”¾æŽ§åˆ¶æ æŒ‰é’®æ˜¾ç¤ºçŠ¶æ€",e)}},(0,e.addComponentListener)("videoScaling.showControlBarButton",C);try{r.options.showControlBarButton&&await C(!0)}catch(e){x("åˆå§‹åŒ–è§†é¢‘ç¼©æ”¾æŽ§åˆ¶æ æŒ‰é’®",e)}},unload:()=>{document.querySelectorAll(`.${v}`).forEach((e=>{const t=e;t.timeoutId&&clearTimeout(t.timeoutId),e.remove()}))},reload:async()=>{const t=(0,e.getComponentSettings)("videoScaling");t&&t.options.scalePreset&&t.options.scalePreset&&"string"==typeof t.options.scalePreset&&t.options.scalePreset in c&&await g(c[t.options.scalePreset])},commitHash:"a44958c8ccf9bc769cc9044fcafeb31e2b64ff8b",coreVersion:"2.10.4",description:(()=>{const e=r(825);return{...Object.fromEntries(e.keys().map((t=>[t.match(/index\.(.+)\.md$/)[1],e(t)]))),"zh-CN":()=>Promise.resolve().then(r.t.bind(r,290,17)).then((e=>e.default))}})()})})(),i=i.component})()));